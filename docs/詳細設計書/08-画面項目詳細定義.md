## 8. ç”»é¢é …ç›®è©³ç´°å®šç¾©

### 8.1 iPad ã‚¢ãƒ—ãƒªç”»é¢å®šç¾©

#### 8.1.1 ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ï¼ˆiPad-001-Loginï¼‰

| é …ç›®ID | é …ç›®å | ç¨®åˆ¥ | ãƒ‡ãƒ¼ã‚¿å‹ | å¿…é ˆ | åˆæœŸå€¤ | ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ | å‚™è€ƒ |
|--------|-------|------|---------|------|--------|--------------|------|
| L001 | ãƒ­ã‚´ | ç”»åƒ | - | - | - | - | SalonTalk AIãƒ­ã‚´ |
| L002 | ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ | ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ› | string | â—‹ | - | emailå½¢å¼ã€255æ–‡å­—ä»¥å†… | ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰: email |
| L003 | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å…¥åŠ› | string | â—‹ | - | 8æ–‡å­—ä»¥ä¸Š | ãƒã‚¹ã‚¯è¡¨ç¤º |
| L004 | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è¡¨ç¤ºåˆ‡æ›¿ | ãƒˆã‚°ãƒ« | boolean | - | false | - | ã‚¿ãƒƒãƒ—ã§ãƒã‚¹ã‚¯è§£é™¤ |
| L005 | ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³ | ãƒœã‚¿ãƒ³ | - | - | - | - | Primaryã€LoadingçŠ¶æ…‹ã‚ã‚Š |
| L006 | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¿˜ã‚Œ | ãƒªãƒ³ã‚¯ | - | - | - | - | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆç”»é¢ã¸ |
| L007 | ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ | ãƒ†ã‚­ã‚¹ãƒˆ | string | - | - | - | èµ¤è‰²ã€ã‚¨ãƒ©ãƒ¼æ™‚è¡¨ç¤º |

**ç”»é¢çŠ¶æ…‹**:

| çŠ¶æ…‹ | L002 | L003 | L005 | L007 |
|------|------|------|------|------|
| åˆæœŸ | enabled | enabled | disabled | hidden |
| å…¥åŠ›ä¸­ | enabled | enabled | enabled | hidden |
| é€ä¿¡ä¸­ | disabled | disabled | loading | hidden |
| ã‚¨ãƒ©ãƒ¼ | enabled | enabled | enabled | visible |

---

#### 8.1.2 ãƒ›ãƒ¼ãƒ ç”»é¢ï¼ˆiPad-002-Homeï¼‰

| é …ç›®ID | é …ç›®å | ç¨®åˆ¥ | ãƒ‡ãƒ¼ã‚¿å‹ | å¿…é ˆ | åˆæœŸå€¤ | ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ | å‚™è€ƒ |
|--------|-------|------|---------|------|--------|--------------|------|
| H001 | ãƒ˜ãƒƒãƒ€ãƒ¼ | ã‚³ãƒ³ãƒ†ãƒŠ | - | - | - | - | - |
| H002 | ãƒ¦ãƒ¼ã‚¶ãƒ¼å | ãƒ†ã‚­ã‚¹ãƒˆ | string | - | - | - | {staff.name} |
| H003 | åº—èˆ—å | ãƒ†ã‚­ã‚¹ãƒˆ | string | - | - | - | {salon.name} |
| H004 | è¨­å®šã‚¢ã‚¤ã‚³ãƒ³ | ãƒœã‚¿ãƒ³ | - | - | - | - | è¨­å®šç”»é¢ã¸ |
| H010 | ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹ãƒœã‚¿ãƒ³ | ãƒœã‚¿ãƒ³ | - | - | - | - | Primaryã€å¤§ã‚µã‚¤ã‚º |
| H011 | ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚»ãƒƒã‚·ãƒ§ãƒ³è¡¨ç¤º | ã‚«ãƒ¼ãƒ‰ | - | - | - | - | éŒ²éŸ³ä¸­ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒã‚ã‚‹å ´åˆ |
| H020 | ä»Šæ—¥ã®çµ±è¨ˆ | ã‚«ãƒ¼ãƒ‰ | - | - | - | - | - |
| H021 | ã‚»ãƒƒã‚·ãƒ§ãƒ³æ•° | ãƒ†ã‚­ã‚¹ãƒˆ | number | - | 0 | - | ä»Šæ—¥ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³æ•° |
| H022 | å¹³å‡ã‚¹ã‚³ã‚¢ | ãƒ†ã‚­ã‚¹ãƒˆ | number | - | - | - | ä»Šæ—¥ã®å¹³å‡ã‚¹ã‚³ã‚¢ |
| H023 | æˆç´„æ•° | ãƒ†ã‚­ã‚¹ãƒˆ | number | - | 0 | - | ä»Šæ—¥ã®æˆç´„æ•° |
| H030 | æœ€è¿‘ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ | ãƒªã‚¹ãƒˆ | array | - | [] | - | æœ€æ–°5ä»¶ |
| H031 | ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚«ãƒ¼ãƒ‰ | ã‚«ãƒ¼ãƒ‰ | object | - | - | - | ã‚¿ãƒƒãƒ—ã§è©³ç´°ã¸ |
| H040 | ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ | ã‚¿ãƒ–ãƒãƒ¼ | - | - | - | - | ãƒ›ãƒ¼ãƒ /ãƒ¬ãƒãƒ¼ãƒˆ/ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°/è¨­å®š |

**ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**:

| é …ç›®ID | ã‚¤ãƒ™ãƒ³ãƒˆ | ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ | é·ç§»å…ˆ |
|--------|---------|-----------|-------|
| H004 | tap | navigate | SettingsScreen |
| H010 | tap | openModal | SessionStartModal |
| H011 | tap | navigate | SessionScreen |
| H031 | tap | navigate | ReportDetailScreen |

---

#### 8.1.3 ã‚»ãƒƒã‚·ãƒ§ãƒ³ç”»é¢ï¼ˆiPad-003-Sessionï¼‰

| é …ç›®ID | é …ç›®å | ç¨®åˆ¥ | ãƒ‡ãƒ¼ã‚¿å‹ | å¿…é ˆ | åˆæœŸå€¤ | ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ | å‚™è€ƒ |
|--------|-------|------|---------|------|--------|--------------|------|
| S001 | æˆ»ã‚‹ãƒœã‚¿ãƒ³ | ãƒœã‚¿ãƒ³ | - | - | - | - | ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤º |
| S002 | ã‚¿ã‚¤ãƒˆãƒ« | ãƒ†ã‚­ã‚¹ãƒˆ | string | - | "ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸­" | - | - |
| S003 | çµŒéæ™‚é–“ | ãƒ†ã‚­ã‚¹ãƒˆ | string | - | "00:00" | - | mm:sså½¢å¼ã€1ç§’æ›´æ–° |
| S004 | éŒ²éŸ³ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ | ã‚¢ã‚¤ã‚³ãƒ³ | - | - | - | - | èµ¤ç‚¹æ»… |
| S010 | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¹ã‚³ã‚¢ã‚¨ãƒªã‚¢ | ã‚³ãƒ³ãƒ†ãƒŠ | - | - | - | - | ä¸Šéƒ¨20% |
| S011 | å‚¾è´ã‚¹ã‚³ã‚¢ã‚²ãƒ¼ã‚¸ | ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ | number | - | 0 | 0-100 | å††å½¢ã‚²ãƒ¼ã‚¸ |
| S012 | ã‚¹ã‚³ã‚¢æ•°å€¤ | ãƒ†ã‚­ã‚¹ãƒˆ | number | - | 0 | - | å¤§ããè¡¨ç¤º |
| S013 | è³ªå•æ•° | ãƒ†ã‚­ã‚¹ãƒˆ | number | - | 0 | - | ã‚¢ã‚¤ã‚³ãƒ³ä»˜ã |
| S014 | æ„Ÿæƒ…ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ | ã‚¢ã‚¤ã‚³ãƒ³ | string | - | "neutral" | - | ğŸ˜ŠğŸ˜ğŸ˜ |
| S015 | æ‚©ã¿ã‚¿ã‚° | ã‚¿ã‚°ç¾¤ | string[] | - | [] | - | æ¤œå‡ºã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ |
| S020 | é€šçŸ¥ã‚«ãƒ¼ãƒ‰ | ã‚«ãƒ¼ãƒ‰ | object | - | null | - | æ¡ä»¶è¡¨ç¤º |
| S021 | é€šçŸ¥ã‚¿ã‚¤ãƒˆãƒ« | ãƒ†ã‚­ã‚¹ãƒˆ | string | - | - | - | ğŸ¯ææ¡ˆãƒãƒ£ãƒ³ã‚¹ï¼ãªã© |
| S022 | é€šçŸ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ | ãƒ†ã‚­ã‚¹ãƒˆ | string | - | - | - | - |
| S023 | æ¨å¥¨å•†å“ | ãƒ†ã‚­ã‚¹ãƒˆ | string | - | - | - | æ¡ä»¶ä»˜ã |
| S024 | æˆåŠŸãƒˆãƒ¼ã‚¯ä¾‹ | ãƒ†ã‚­ã‚¹ãƒˆ | string | - | - | - | - |
| S025 | é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³ | ãƒœã‚¿ãƒ³ | - | - | - | - | é€šçŸ¥ã‚’é–‰ã˜ã‚‹ |
| S030 | ä¼šè©±ãƒ­ã‚°ã‚¨ãƒªã‚¢ | ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒ“ãƒ¥ãƒ¼ | - | - | - | - | ä¸­å¤®50% |
| S031 | ä¼šè©±ãƒ­ã‚°ãƒªã‚¹ãƒˆ | ãƒªã‚¹ãƒˆ | array | - | [] | - | FlatList |
| S032 | ç™ºè©±ã‚¢ã‚¤ãƒ†ãƒ  | ã‚«ãƒ¼ãƒ‰ | object | - | - | - | è©±è€…åˆ¥ã‚¹ã‚¿ã‚¤ãƒ« |
| S033 | è©±è€…ã‚¢ã‚¤ã‚³ãƒ³ | ã‚¢ã‚¤ã‚³ãƒ³ | string | - | - | - | ğŸ‘¤/ğŸ’‡ |
| S034 | è©±è€…ãƒ©ãƒ™ãƒ« | ãƒ†ã‚­ã‚¹ãƒˆ | string | - | - | - | ã‚¹ã‚¿ã‚¤ãƒªã‚¹ãƒˆ/ãŠå®¢æ§˜ |
| S035 | ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ— | ãƒ†ã‚­ã‚¹ãƒˆ | string | - | - | - | HH:mm |
| S036 | ç™ºè©±ãƒ†ã‚­ã‚¹ãƒˆ | ãƒ†ã‚­ã‚¹ãƒˆ | string | - | - | - | - |
| S040 | ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¨ãƒªã‚¢ | ã‚³ãƒ³ãƒ†ãƒŠ | - | - | - | - | ä¸‹éƒ¨10% |
| S041 | çµ‚äº†ãƒœã‚¿ãƒ³ | ãƒœã‚¿ãƒ³ | - | - | - | - | Dangerã€å¤§ã‚µã‚¤ã‚º |

**ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°**:

| é …ç›®ID | æ›´æ–°ãƒˆãƒªã‚¬ãƒ¼ | æ›´æ–°é »åº¦ | ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ |
|--------|------------|---------|------------|
| S003 | timer | 1ç§’ | ãƒ­ãƒ¼ã‚«ãƒ«è¨ˆç®— |
| S011-S015 | realtime:analysis | ã‚¤ãƒ™ãƒ³ãƒˆ | WebSocket |
| S020-S024 | realtime:notification | ã‚¤ãƒ™ãƒ³ãƒˆ | WebSocket |
| S031-S036 | speech:transcript | éšæ™‚ | SpeechAnalyzer |

**çŠ¶æ…‹ç®¡ç†ï¼ˆZustandï¼‰**:

```typescript
interface SessionState {
  session: Session | null;
  isRecording: boolean;
  elapsedSeconds: number;
  currentScore: number;
  questionCount: number;
  emotion: 'positive' | 'neutral' | 'negative';
  concernTags: string[];
  notification: Notification | null;
  conversationLog: ConversationTurn[];
  
  // Actions
  startSession: (params: CreateSessionParams) => Promise<void>;
  endSession: () => Promise<void>;
  updateAnalysis: (analysis: AnalysisPayload) => void;
  addConversationTurn: (turn: ConversationTurn) => void;
  showNotification: (notification: Notification) => void;
  dismissNotification: () => void;
}
```

---

#### 8.1.4 ãƒ¬ãƒãƒ¼ãƒˆè©³ç´°ç”»é¢ï¼ˆiPad-005-ReportDetailï¼‰

| é …ç›®ID | é …ç›®å | ç¨®åˆ¥ | ãƒ‡ãƒ¼ã‚¿å‹ | å¿…é ˆ | åˆæœŸå€¤ | ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ | å‚™è€ƒ |
|--------|-------|------|---------|------|--------|--------------|------|
| R001 | æˆ»ã‚‹ãƒœã‚¿ãƒ³ | ãƒœã‚¿ãƒ³ | - | - | - | - | ãƒ¬ãƒãƒ¼ãƒˆä¸€è¦§ã¸ |
| R002 | å…±æœ‰ãƒœã‚¿ãƒ³ | ãƒœã‚¿ãƒ³ | - | - | - | - | PDFå‡ºåŠ› |
| R010 | ç·åˆã‚¹ã‚³ã‚¢ã‚«ãƒ¼ãƒ‰ | ã‚«ãƒ¼ãƒ‰ | - | - | - | - | - |
| R011 | ã‚¹ã‚³ã‚¢æ•°å€¤ | ãƒ†ã‚­ã‚¹ãƒˆ | number | - | - | 0-100 | å¤§ããè¡¨ç¤º |
| R012 | ã‚¹ã‚³ã‚¢ãƒ©ãƒ³ã‚¯ | ãƒãƒƒã‚¸ | string | - | - | - | S/A/B/C/D |
| R013 | æ—¥æ™‚ | ãƒ†ã‚­ã‚¹ãƒˆ | string | - | - | - | YYYY/MM/DD HH:mm |
| R014 | æ–½è¡“æ™‚é–“ | ãƒ†ã‚­ã‚¹ãƒˆ | string | - | - | - | mmåˆ† |
| R020 | æŒ‡æ¨™ã‚¹ã‚³ã‚¢ã‚»ã‚¯ã‚·ãƒ§ãƒ³ | ã‚³ãƒ³ãƒ†ãƒŠ | - | - | - | - | - |
| R021 | æŒ‡æ¨™ã‚«ãƒ¼ãƒ‰ | ã‚«ãƒ¼ãƒ‰ | object | - | - | - | 7æŒ‡æ¨™åˆ† |
| R022 | æŒ‡æ¨™å | ãƒ†ã‚­ã‚¹ãƒˆ | string | - | - | - | - |
| R023 | æŒ‡æ¨™ã‚¹ã‚³ã‚¢ | ãƒ†ã‚­ã‚¹ãƒˆ | number | - | - | - | - |
| R024 | æŒ‡æ¨™ã‚²ãƒ¼ã‚¸ | ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ | number | - | - | 0-100 | - |
| R030 | è‰¯ã‹ã£ãŸç‚¹ã‚»ã‚¯ã‚·ãƒ§ãƒ³ | ã‚³ãƒ³ãƒ†ãƒŠ | - | - | - | - | - |
| R031 | è‰¯ã‹ã£ãŸç‚¹ãƒªã‚¹ãƒˆ | ãƒªã‚¹ãƒˆ | string[] | - | [] | - | âœ“ã‚¢ã‚¤ã‚³ãƒ³ |
| R040 | æ”¹å–„ãƒã‚¤ãƒ³ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ | ã‚³ãƒ³ãƒ†ãƒŠ | - | - | - | - | - |
| R041 | æ”¹å–„ãƒã‚¤ãƒ³ãƒˆãƒªã‚¹ãƒˆ | ãƒªã‚¹ãƒˆ | string[] | - | [] | - | !ã‚¢ã‚¤ã‚³ãƒ³ |
| R050 | ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ ã‚»ã‚¯ã‚·ãƒ§ãƒ³ | ã‚³ãƒ³ãƒ†ãƒŠ | - | - | - | - | - |
| R051 | ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ ãƒªã‚¹ãƒˆ | ãƒªã‚¹ãƒˆ | string[] | - | [] | - | ç•ªå·ä»˜ã |
| R060 | AI ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚»ã‚¯ã‚·ãƒ§ãƒ³ | ã‚«ãƒ¼ãƒ‰ | - | - | - | - | - |
| R061 | ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒ†ã‚­ã‚¹ãƒˆ | ãƒ†ã‚­ã‚¹ãƒˆ | string | - | - | - | æŠ˜ã‚ŠãŸãŸã¿å¯ |
| R070 | ä¼šè©±è¦ç´„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ | ã‚«ãƒ¼ãƒ‰ | - | - | - | - | - |
| R071 | è¦ç´„ãƒ†ã‚­ã‚¹ãƒˆ | ãƒ†ã‚­ã‚¹ãƒˆ | string | - | - | - | - |

---

### 8.2 Web ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ç”»é¢å®šç¾©

#### 8.2.1 ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ç”»é¢ï¼ˆWeb-003-Dashboardï¼‰

| é …ç›®ID | é …ç›®å | ç¨®åˆ¥ | ãƒ‡ãƒ¼ã‚¿å‹ | å¿…é ˆ | åˆæœŸå€¤ | ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ | å‚™è€ƒ |
|--------|-------|------|---------|------|--------|--------------|------|
| D001 | ãƒ˜ãƒƒãƒ€ãƒ¼ | ã‚³ãƒ³ãƒ†ãƒŠ | - | - | - | - | - |
| D002 | ãƒ­ã‚´ | ç”»åƒ | - | - | - | - | - |
| D003 | é€šçŸ¥ã‚¢ã‚¤ã‚³ãƒ³ | ãƒœã‚¿ãƒ³ | - | - | - | - | ãƒãƒƒã‚¸ä»˜ã |
| D004 | ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ | ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ | - | - | - | - | - |
| D010 | ã‚µã‚¤ãƒ‰ãƒãƒ¼ | ã‚³ãƒ³ãƒ†ãƒŠ | - | - | - | - | 240pxå¹… |
| D011 | ãƒŠãƒ“ï¼šãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ | ãƒªãƒ³ã‚¯ | - | - | - | - | ã‚¢ã‚¯ãƒ†ã‚£ãƒ– |
| D012 | ãƒŠãƒ“ï¼šã‚¹ã‚¿ãƒƒãƒ• | ãƒªãƒ³ã‚¯ | - | - | - | - | - |
| D013 | ãƒŠãƒ“ï¼šåˆ†æ | ãƒªãƒ³ã‚¯ | - | - | - | - | - |
| D014 | ãƒŠãƒ“ï¼šæˆåŠŸäº‹ä¾‹ | ãƒªãƒ³ã‚¯ | - | - | - | - | - |
| D015 | ãƒŠãƒ“ï¼šè¨­å®š | ãƒªãƒ³ã‚¯ | - | - | - | - | - |
| D020 | ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ | ã‚³ãƒ³ãƒ†ãƒŠ | - | - | - | - | - |
| D030 | æœŸé–“ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ | ã‚»ãƒ¬ã‚¯ãƒˆ | string | - | "today" | - | ä»Šæ—¥/é€±/æœˆ/ã‚«ã‚¹ã‚¿ãƒ  |
| D040 | ã‚µãƒãƒªãƒ¼ã‚«ãƒ¼ãƒ‰ç¾¤ | ã‚³ãƒ³ãƒ†ãƒŠ | - | - | - | - | 4ã‚«ãƒ¼ãƒ‰æ¨ªä¸¦ã³ |
| D041 | ä»Šæ—¥ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ | ã‚«ãƒ¼ãƒ‰ | object | - | - | - | æ•°å€¤+å¢—æ¸› |
| D042 | å¹³å‡ã‚¹ã‚³ã‚¢ | ã‚«ãƒ¼ãƒ‰ | object | - | - | - | æ•°å€¤+å¢—æ¸› |
| D043 | æˆç´„ç‡ | ã‚«ãƒ¼ãƒ‰ | object | - | - | - | %+å¢—æ¸› |
| D044 | æ´»å‹•ã‚¹ã‚¿ãƒƒãƒ• | ã‚«ãƒ¼ãƒ‰ | object | - | - | - | n/total |
| D050 | ã‚¹ã‚³ã‚¢æ¨ç§»ã‚°ãƒ©ãƒ• | ãƒãƒ£ãƒ¼ãƒˆ | array | - | [] | - | Line Chart |
| D051 | Xè»¸ | - | - | - | - | - | æ—¥ä»˜ |
| D052 | Yè»¸ | - | - | - | - | - | ã‚¹ã‚³ã‚¢0-100 |
| D053 | å‡¡ä¾‹ | - | - | - | - | - | å¹³å‡/æœ€é«˜/æœ€ä½ |
| D060 | ã‚¹ã‚¿ãƒƒãƒ•ãƒ©ãƒ³ã‚­ãƒ³ã‚° | ãƒ†ãƒ¼ãƒ–ãƒ« | array | - | [] | - | Top 10 |
| D061 | é †ä½ | ãƒ†ã‚­ã‚¹ãƒˆ | number | - | - | - | - |
| D062 | ã‚¹ã‚¿ãƒƒãƒ•å | ãƒ†ã‚­ã‚¹ãƒˆ | string | - | - | - | - |
| D063 | å¹³å‡ã‚¹ã‚³ã‚¢ | ãƒ†ã‚­ã‚¹ãƒˆ | number | - | - | - | - |
| D064 | ã‚»ãƒƒã‚·ãƒ§ãƒ³æ•° | ãƒ†ã‚­ã‚¹ãƒˆ | number | - | - | - | - |
| D065 | æˆç´„ç‡ | ãƒ†ã‚­ã‚¹ãƒˆ | number | - | - | - | % |
| D070 | æœ€è¿‘ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ | ãƒ†ãƒ¼ãƒ–ãƒ« | array | - | [] | - | - |
| D071 | æ—¥æ™‚ | ãƒ†ã‚­ã‚¹ãƒˆ | string | - | - | - | - |
| D072 | ã‚¹ã‚¿ã‚¤ãƒªã‚¹ãƒˆ | ãƒ†ã‚­ã‚¹ãƒˆ | string | - | - | - | - |
| D073 | ã‚¹ã‚³ã‚¢ | ãƒãƒƒã‚¸ | number | - | - | - | è‰²åˆ†ã‘ |
| D074 | æ–½è¡“æ™‚é–“ | ãƒ†ã‚­ã‚¹ãƒˆ | string | - | - | - | - |
| D075 | è©³ç´°ãƒªãƒ³ã‚¯ | ãƒœã‚¿ãƒ³ | - | - | - | - | - |

**ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒï¼ˆSWRï¼‰**:

```typescript
// hooks/useDashboardData.ts

export function useDashboardData(period: Period) {
  const { salonId } = useAuth();
  
  const { data: summary, error: summaryError } = useSWR(
    salonId ? `/api/dashboard/summary?salonId=${salonId}&period=${period}` : null,
    fetcher,
    { refreshInterval: 60000 }  // 1åˆ†ã”ã¨æ›´æ–°
  );

  const { data: scoreHistory, error: historyError } = useSWR(
    salonId ? `/api/dashboard/score-history?salonId=${salonId}&period=${period}` : null,
    fetcher
  );

  const { data: ranking, error: rankingError } = useSWR(
    salonId ? `/api/dashboard/ranking?salonId=${salonId}&period=${period}` : null,
    fetcher
  );

  const { data: recentSessions, error: sessionsError } = useSWR(
    salonId ? `/api/dashboard/recent-sessions?salonId=${salonId}&limit=10` : null,
    fetcher,
    { refreshInterval: 30000 }  // 30ç§’ã”ã¨æ›´æ–°
  );

  return {
    summary,
    scoreHistory,
    ranking,
    recentSessions,
    isLoading: !summary && !summaryError,
    error: summaryError || historyError || rankingError || sessionsError,
  };
}
```

---

### 8.3 å…¥åŠ›ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å®šç¾©

#### 8.3.1 å…±é€šãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ«

| ãƒ«ãƒ¼ãƒ«å | æ­£è¦è¡¨ç¾/æ¡ä»¶ | ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ |
|---------|-------------|----------------|
| required | value !== null && value !== '' | {é …ç›®å}ã¯å¿…é ˆã§ã™ |
| email | /^[^\s@]+@[^\s@]+\.[^\s@]+$/ | æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ |
| minLength(n) | value.length >= n | {é …ç›®å}ã¯{n}æ–‡å­—ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„ |
| maxLength(n) | value.length <= n | {é …ç›®å}ã¯{n}æ–‡å­—ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„ |
| pattern(regex) | regex.test(value) | {é …ç›®å}ã®å½¢å¼ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“ |
| min(n) | value >= n | {é …ç›®å}ã¯{n}ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„ |
| max(n) | value <= n | {é …ç›®å}ã¯{n}ä»¥ä¸‹ã§å…¥åŠ›ã—ã¦ãã ã•ã„ |
| uuid | UUIDå½¢å¼ | ç„¡åŠ¹ãªIDã§ã™ |

#### 8.3.2 ãƒ•ã‚©ãƒ¼ãƒ åˆ¥ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚­ãƒ¼ãƒ

```typescript
// schemas/validation.ts

import { z } from 'zod';

// ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ 
export const LoginSchema = z.object({
  email: z
    .string()
    .min(1, 'ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯å¿…é ˆã§ã™')
    .email('æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„')
    .max(255, 'ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯255æ–‡å­—ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„'),
  password: z
    .string()
    .min(1, 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯å¿…é ˆã§ã™')
    .min(8, 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯8æ–‡å­—ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„'),
});

// ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹ãƒ•ã‚©ãƒ¼ãƒ 
export const SessionStartSchema = z.object({
  customerInfo: z.object({
    ageGroup: z.enum(['10s', '20s', '30s', '40s', '50s', '60s+']).optional(),
    gender: z.enum(['male', 'female', 'other']).optional(),
    visitFrequency: z.enum(['first', 'monthly', 'bimonthly', 'quarterly', 'irregular']).optional(),
    notes: z.string().max(500, 'ãƒ¡ãƒ¢ã¯500æ–‡å­—ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„').optional(),
  }).optional(),
});

// ã‚¹ã‚¿ãƒƒãƒ•ä½œæˆãƒ•ã‚©ãƒ¼ãƒ 
export const CreateStaffSchema = z.object({
  name: z
    .string()
    .min(1, 'æ°åã¯å¿…é ˆã§ã™')
    .max(50, 'æ°åã¯50æ–‡å­—ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„'),
  email: z
    .string()
    .min(1, 'ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯å¿…é ˆã§ã™')
    .email('æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„')
    .max(255, 'ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯255æ–‡å­—ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„'),
  role: z.enum(['owner', 'manager', 'stylist', 'assistant'], {
    errorMap: () => ({ message: 'ãƒ­ãƒ¼ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„' }),
  }),
  position: z.string().max(50, 'å½¹è·ã¯50æ–‡å­—ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„').optional(),
  joinDate: z.string().date('æœ‰åŠ¹ãªæ—¥ä»˜ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„').optional(),
});

// æˆåŠŸäº‹ä¾‹ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ 
export const CreateSuccessCaseSchema = z.object({
  concernKeywords: z
    .array(z.string())
    .min(1, 'æ‚©ã¿ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’1ã¤ä»¥ä¸Šå…¥åŠ›ã—ã¦ãã ã•ã„')
    .max(10, 'æ‚©ã¿ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¯10å€‹ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„'),
  successfulTalk: z
    .string()
    .min(10, 'æˆåŠŸãƒˆãƒ¼ã‚¯ä¾‹ã¯10æ–‡å­—ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„')
    .max(2000, 'æˆåŠŸãƒˆãƒ¼ã‚¯ä¾‹ã¯2000æ–‡å­—ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„'),
  keyTactics: z
    .array(z.string())
    .min(1, 'ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒˆã‚’1ã¤ä»¥ä¸Šå…¥åŠ›ã—ã¦ãã ã•ã„')
    .max(5, 'ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒˆã¯5å€‹ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„'),
  soldProduct: z.string().max(100, 'å•†å“åã¯100æ–‡å­—ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„').optional(),
  isPublic: z.boolean().default(false),
});

// åº—èˆ—è¨­å®šãƒ•ã‚©ãƒ¼ãƒ 
export const SalonSettingsSchema = z.object({
  name: z
    .string()
    .min(1, 'åº—èˆ—åã¯å¿…é ˆã§ã™')
    .max(100, 'åº—èˆ—åã¯100æ–‡å­—ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„'),
  address: z.string().max(500, 'ä½æ‰€ã¯500æ–‡å­—ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„').optional(),
  phone: z
    .string()
    .regex(/^[\d-]+$/, 'é›»è©±ç•ªå·ã¯æ•°å­—ã¨ãƒã‚¤ãƒ•ãƒ³ã®ã¿ã§å…¥åŠ›ã—ã¦ãã ã•ã„')
    .max(20, 'é›»è©±ç•ªå·ã¯20æ–‡å­—ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„')
    .optional(),
  settings: z.object({
    notification: z.object({
      enablePush: z.boolean(),
      enableEmail: z.boolean(),
      concernDetectionAlert: z.boolean(),
      sessionCompleteAlert: z.boolean(),
    }),
    analysis: z.object({
      idealTalkRatio: z.number().min(20).max(60),
      minQuestionCount: z.number().min(1).max(20),
      concernKeywords: z.array(z.string()),
    }),
    display: z.object({
      showRanking: z.boolean(),
      anonymizeCustomer: z.boolean(),
    }),
  }),
});

// ğŸ†• ãƒ‡ãƒã‚¤ã‚¹ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ ï¼ˆ2025-12-09è¿½åŠ ï¼‰
export const CreateDeviceSchema = z.object({
  device_name: z
    .string()
    .min(1, 'ãƒ‡ãƒã‚¤ã‚¹åã¯å¿…é ˆã§ã™')
    .max(50, 'ãƒ‡ãƒã‚¤ã‚¹åã¯50æ–‡å­—ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„'),
  seat_number: z
    .number()
    .int('æ•´æ•°ã§å…¥åŠ›ã—ã¦ãã ã•ã„')
    .min(1, 'ã‚»ãƒƒãƒˆé¢ç•ªå·ã¯1ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„')
    .max(99, 'ã‚»ãƒƒãƒˆé¢ç•ªå·ã¯99ä»¥ä¸‹ã§å…¥åŠ›ã—ã¦ãã ã•ã„')
    .optional(),
});

// ğŸ†• ãƒ‡ãƒã‚¤ã‚¹ã‚¢ã‚¯ãƒ†ã‚£ãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚©ãƒ¼ãƒ ï¼ˆ2025-12-09è¿½åŠ ï¼‰
export const DeviceActivationSchema = z.object({
  activation_code: z
    .string()
    .length(6, 'ã‚¢ã‚¯ãƒ†ã‚£ãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã¯6æ¡ã§å…¥åŠ›ã—ã¦ãã ã•ã„')
    .regex(/^\d{6}$/, 'ã‚¢ã‚¯ãƒ†ã‚£ãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã¯æ•°å­—ã®ã¿ã§å…¥åŠ›ã—ã¦ãã ã•ã„'),
});

// ğŸ†• ãƒ‡ãƒã‚¤ã‚¹æ›´æ–°ãƒ•ã‚©ãƒ¼ãƒ ï¼ˆ2025-12-09è¿½åŠ ï¼‰
export const UpdateDeviceSchema = z.object({
  device_name: z
    .string()
    .min(1, 'ãƒ‡ãƒã‚¤ã‚¹åã¯å¿…é ˆã§ã™')
    .max(50, 'ãƒ‡ãƒã‚¤ã‚¹åã¯50æ–‡å­—ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„')
    .optional(),
  seat_number: z
    .number()
    .int('æ•´æ•°ã§å…¥åŠ›ã—ã¦ãã ã•ã„')
    .min(1, 'ã‚»ãƒƒãƒˆé¢ç•ªå·ã¯1ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„')
    .max(99, 'ã‚»ãƒƒãƒˆé¢ç•ªå·ã¯99ä»¥ä¸‹ã§å…¥åŠ›ã—ã¦ãã ã•ã„')
    .nullable()
    .optional(),
  status: z
    .enum(['active', 'inactive', 'pending'], {
      errorMap: () => ({ message: 'ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’é¸æŠã—ã¦ãã ã•ã„' }),
    })
    .optional(),
});
```

---

### 8.4 ğŸ†• ãƒ‡ãƒã‚¤ã‚¹ç®¡ç†ç”»é¢å®šç¾©ï¼ˆ2025-12-09è¿½åŠ ï¼‰

#### 8.4.1 ãƒ‡ãƒã‚¤ã‚¹ç®¡ç†ç”»é¢ï¼ˆWeb-009-DeviceManagementï¼‰

| é …ç›®ID | é …ç›®å | ç¨®åˆ¥ | ãƒ‡ãƒ¼ã‚¿å‹ | å¿…é ˆ | åˆæœŸå€¤ | ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ | å‚™è€ƒ |
|--------|-------|------|---------|------|--------|--------------|------|
| DM001 | ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ« | ãƒ†ã‚­ã‚¹ãƒˆ | string | - | "ãƒ‡ãƒã‚¤ã‚¹ç®¡ç†" | - | - |
| DM002 | æ–°è¦è¿½åŠ ãƒœã‚¿ãƒ³ | ãƒœã‚¿ãƒ³ | - | - | - | - | è¿½åŠ ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º |
| DM010 | ãƒ‡ãƒã‚¤ã‚¹ä¸€è¦§ãƒ†ãƒ¼ãƒ–ãƒ« | ãƒ†ãƒ¼ãƒ–ãƒ« | array | - | [] | - | - |
| DM011 | ãƒ‡ãƒã‚¤ã‚¹å | ãƒ†ã‚­ã‚¹ãƒˆ | string | - | - | - | ãƒªãƒ³ã‚¯ï¼šè©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ« |
| DM012 | ã‚»ãƒƒãƒˆé¢ç•ªå· | ãƒ†ã‚­ã‚¹ãƒˆ | number | - | - | - | æœªè¨­å®šæ™‚ã¯ã€Œ-ã€ |
| DM013 | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒƒã‚¸ | ãƒãƒƒã‚¸ | string | - | - | - | active/inactive/pending/revoked |
| DM014 | ã‚ªãƒ³ãƒ©ã‚¤ãƒ³çŠ¶æ…‹ | ãƒãƒƒã‚¸ | boolean | - | - | - | â—ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ / â—‹ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ |
| DM015 | æœ€çµ‚æ¥ç¶š | ãƒ†ã‚­ã‚¹ãƒˆ | string | - | - | - | ç›¸å¯¾æ™‚é–“ï¼ˆä¾‹: "5åˆ†å‰"ï¼‰ |
| DM016 | ç¾åœ¨ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ | ãƒ†ã‚­ã‚¹ãƒˆ | string | - | - | - | é€²è¡Œä¸­ã®ã‚¹ã‚¿ã‚¤ãƒªã‚¹ãƒˆå |
| DM017 | ã‚³ãƒ¼ãƒ‰ç™ºè¡Œãƒœã‚¿ãƒ³ | ãƒœã‚¿ãƒ³ | - | - | - | - | ã‚¢ã‚¯ãƒ†ã‚£ãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ç™ºè¡Œ |
| DM018 | è¨­å®šãƒœã‚¿ãƒ³ | ãƒœã‚¿ãƒ³ | - | - | - | - | è¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º |
| DM020 | æ–°è¦è¿½åŠ ãƒ¢ãƒ¼ãƒ€ãƒ« | ãƒ¢ãƒ¼ãƒ€ãƒ« | - | - | - | - | - |
| DM021 | ãƒ‡ãƒã‚¤ã‚¹åå…¥åŠ› | ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ› | string | â—‹ | - | 1-50æ–‡å­— | - |
| DM022 | ã‚»ãƒƒãƒˆé¢ç•ªå·å…¥åŠ› | æ•°å€¤å…¥åŠ› | number | - | - | 1-99 | - |
| DM023 | è¿½åŠ ãƒœã‚¿ãƒ³ | ãƒœã‚¿ãƒ³ | - | - | - | - | Primary |
| DM024 | ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒœã‚¿ãƒ³ | ãƒœã‚¿ãƒ³ | - | - | - | - | Secondary |
| DM030 | ã‚³ãƒ¼ãƒ‰è¡¨ç¤ºãƒ¢ãƒ¼ãƒ€ãƒ« | ãƒ¢ãƒ¼ãƒ€ãƒ« | - | - | - | - | - |
| DM031 | ã‚¢ã‚¯ãƒ†ã‚£ãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ | ãƒ†ã‚­ã‚¹ãƒˆ | string | - | - | - | 6æ¡ã€å¤§ããè¡¨ç¤º |
| DM032 | QRã‚³ãƒ¼ãƒ‰ | ç”»åƒ | - | - | - | - | ã‚³ãƒ¼ãƒ‰ã®QRè¡¨ç¤º |
| DM033 | æœ‰åŠ¹æœŸé™ | ãƒ†ã‚­ã‚¹ãƒˆ | string | - | - | - | YYYY/MM/DD HH:mm ã¾ã§ |
| DM034 | ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ | ãƒœã‚¿ãƒ³ | - | - | - | - | ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ |
| DM035 | é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³ | ãƒœã‚¿ãƒ³ | - | - | - | - | ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹ |
| DM040 | è¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ« | ãƒ¢ãƒ¼ãƒ€ãƒ« | - | - | - | - | ãƒ‡ãƒã‚¤ã‚¹ç·¨é›† |
| DM041 | ãƒ‡ãƒã‚¤ã‚¹åç·¨é›† | ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ› | string | â—‹ | {device.device_name} | 1-50æ–‡å­— | - |
| DM042 | ã‚»ãƒƒãƒˆé¢ç•ªå·ç·¨é›† | æ•°å€¤å…¥åŠ› | number | - | {device.seat_number} | 1-99 | - |
| DM043 | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¤‰æ›´ | ã‚»ãƒ¬ã‚¯ãƒˆ | string | - | {device.status} | - | active/inactive/pending |
| DM044 | ä¿å­˜ãƒœã‚¿ãƒ³ | ãƒœã‚¿ãƒ³ | - | - | - | - | Primary |
| DM045 | ç„¡åŠ¹åŒ–ãƒœã‚¿ãƒ³ | ãƒœã‚¿ãƒ³ | - | - | - | - | Dangerï¼ˆowner onlyï¼‰ |
| DM046 | ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒœã‚¿ãƒ³ | ãƒœã‚¿ãƒ³ | - | - | - | - | Secondary |

**ç”»é¢çŠ¶æ…‹**:

| çŠ¶æ…‹ | DM002 | DM017 | DM018 | DM045 |
|------|-------|-------|-------|-------|
| èª­ã¿è¾¼ã¿ä¸­ | disabled | disabled | disabled | hidden |
| ä¸€è¦§è¡¨ç¤º | enabled | enabled | enabled | visible |
| è¿½åŠ ãƒ¢ãƒ¼ãƒ€ãƒ« | disabled | disabled | disabled | hidden |
| ã‚³ãƒ¼ãƒ‰è¡¨ç¤ºãƒ¢ãƒ¼ãƒ€ãƒ« | disabled | disabled | disabled | hidden |

**ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**:

| é …ç›®ID | ã‚¤ãƒ™ãƒ³ãƒˆ | ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ | çµæœ |
|--------|---------|-----------|------|
| DM002 | click | openModal | æ–°è¦è¿½åŠ ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º |
| DM017 | click | api:generate-activation-code | ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã€ã‚³ãƒ¼ãƒ‰è¡¨ç¤ºãƒ¢ãƒ¼ãƒ€ãƒ« |
| DM018 | click | openModal | è¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º |
| DM023 | click | api:register-device | ãƒ‡ãƒã‚¤ã‚¹ç™»éŒ²ã€ä¸€è¦§æ›´æ–° |
| DM034 | click | copyToClipboard | ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã€ãƒˆãƒ¼ã‚¹ãƒˆè¡¨ç¤º |
| DM044 | click | api:update-device | ãƒ‡ãƒã‚¤ã‚¹æ›´æ–°ã€ä¸€è¦§æ›´æ–° |
| DM045 | click | confirm â†’ api:revoke-device | ç¢ºèªå¾Œãƒ‡ãƒã‚¤ã‚¹ç„¡åŠ¹åŒ– |

**ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒï¼ˆSWRï¼‰**:

```typescript
// hooks/useDevices.ts

export function useDevices() {
  const { salonId } = useAuth();

  const { data: devices, error, mutate } = useSWR(
    salonId ? `/api/devices?salon_id=${salonId}` : null,
    fetcher,
    { refreshInterval: 30000 }  // 30ç§’ã”ã¨æ›´æ–°ï¼ˆã‚ªãƒ³ãƒ©ã‚¤ãƒ³çŠ¶æ…‹åæ˜ ï¼‰
  );

  const registerDevice = async (params: RegisterDeviceParams) => {
    const result = await supabase.functions.invoke('register-device', {
      body: params,
    });
    await mutate();
    return result;
  };

  const generateActivationCode = async (deviceId: string) => {
    return await supabase.functions.invoke('generate-activation-code', {
      body: { device_id: deviceId },
    });
  };

  const updateDevice = async (params: UpdateDeviceParams) => {
    const result = await supabase.functions.invoke('update-device', {
      body: params,
    });
    await mutate();
    return result;
  };

  const revokeDevice = async (deviceId: string, reason?: string) => {
    const result = await supabase.functions.invoke('revoke-device', {
      body: { device_id: deviceId, reason },
    });
    await mutate();
    return result;
  };

  return {
    devices,
    isLoading: !devices && !error,
    error,
    registerDevice,
    generateActivationCode,
    updateDevice,
    revokeDevice,
    refresh: mutate,
  };
}
```

---

#### 8.4.2 ã‚¢ã‚¯ãƒ†ã‚£ãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ç”»é¢ï¼ˆiPad-011-Activationï¼‰

| é …ç›®ID | é …ç›®å | ç¨®åˆ¥ | ãƒ‡ãƒ¼ã‚¿å‹ | å¿…é ˆ | åˆæœŸå€¤ | ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ | å‚™è€ƒ |
|--------|-------|------|---------|------|--------|--------------|------|
| A001 | ãƒ­ã‚´ | ç”»åƒ | - | - | - | - | SalonTalk AIãƒ­ã‚´ |
| A002 | ã‚¿ã‚¤ãƒˆãƒ« | ãƒ†ã‚­ã‚¹ãƒˆ | string | - | "iPadã‚’ç™»éŒ²ã—ã¦ãã ã•ã„" | - | - |
| A003 | ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ« | ãƒ†ã‚­ã‚¹ãƒˆ | string | - | "ç®¡ç†è€…ã‹ã‚‰å—ã‘å–ã£ãŸ6æ¡ã®ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„" | - | - |
| A010 | ã‚³ãƒ¼ãƒ‰å…¥åŠ›ã‚¨ãƒªã‚¢ | ã‚³ãƒ³ãƒ†ãƒŠ | - | - | - | - | 6æ¡å…¥åŠ› |
| A011 | ã‚³ãƒ¼ãƒ‰å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰1 | ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ› | string | â—‹ | - | 1æ–‡å­—ã€æ•°å­—ã®ã¿ | è‡ªå‹•ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç§»å‹• |
| A012 | ã‚³ãƒ¼ãƒ‰å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰2 | ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ› | string | â—‹ | - | 1æ–‡å­—ã€æ•°å­—ã®ã¿ | - |
| A013 | ã‚³ãƒ¼ãƒ‰å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰3 | ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ› | string | â—‹ | - | 1æ–‡å­—ã€æ•°å­—ã®ã¿ | - |
| A014 | ã‚³ãƒ¼ãƒ‰å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰4 | ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ› | string | â—‹ | - | 1æ–‡å­—ã€æ•°å­—ã®ã¿ | - |
| A015 | ã‚³ãƒ¼ãƒ‰å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰5 | ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ› | string | â—‹ | - | 1æ–‡å­—ã€æ•°å­—ã®ã¿ | - |
| A016 | ã‚³ãƒ¼ãƒ‰å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰6 | ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ› | string | â—‹ | - | 1æ–‡å­—ã€æ•°å­—ã®ã¿ | - |
| A020 | ã‚¢ã‚¯ãƒ†ã‚£ãƒ™ãƒ¼ãƒˆãƒœã‚¿ãƒ³ | ãƒœã‚¿ãƒ³ | - | - | - | - | 6æ¡å…¥åŠ›å®Œäº†å¾Œã«æœ‰åŠ¹åŒ– |
| A021 | ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ | ãƒ†ã‚­ã‚¹ãƒˆ | string | - | - | - | èµ¤è‰²ã€ã‚¨ãƒ©ãƒ¼æ™‚è¡¨ç¤º |
| A022 | ãƒ˜ãƒ«ãƒ—ãƒ†ã‚­ã‚¹ãƒˆ | ãƒ†ã‚­ã‚¹ãƒˆ | string | - | - | - | ç®¡ç†è€…ã¸ã®å•ã„åˆã‚ã›æ¡ˆå†… |
| A030 | ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ | ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ | - | - | - | - | APIå‘¼ã³å‡ºã—ä¸­ |

**ç”»é¢çŠ¶æ…‹**:

| çŠ¶æ…‹ | A011-A016 | A020 | A021 | A030 |
|------|-----------|------|------|------|
| åˆæœŸ | enabled, empty | disabled | hidden | hidden |
| å…¥åŠ›ä¸­ | enabled | disabled | hidden | hidden |
| å…¥åŠ›å®Œäº† | enabled | enabled | hidden | hidden |
| é€ä¿¡ä¸­ | disabled | loading | hidden | visible |
| ã‚¨ãƒ©ãƒ¼ | enabled | enabled | visible | hidden |
| æˆåŠŸ | disabled | disabled | hidden | hidden |

**ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**:

| é …ç›®ID | ã‚¤ãƒ™ãƒ³ãƒˆ | ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ | çµæœ |
|--------|---------|-----------|------|
| A011-A016 | input | validateAndAutoFocus | æ¬¡ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¸è‡ªå‹•ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ |
| A011-A016 | paste | handlePaste | 6æ¡ã‚’å„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«åˆ†é… |
| A020 | click | api:activate-device | ã‚¢ã‚¯ãƒ†ã‚£ãƒ™ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ |

**çŠ¶æ…‹ç®¡ç†ï¼ˆZustandï¼‰**:

```typescript
// stores/deviceStore.ts

interface DeviceState {
  // ãƒ‡ãƒã‚¤ã‚¹æƒ…å ±
  deviceId: string | null;
  deviceIdentifier: string | null;
  isActivated: boolean;
  salonId: string | null;
  salonName: string | null;
  deviceName: string | null;
  seatNumber: number | null;

  // ã‚¢ã‚¯ãƒ†ã‚£ãƒ™ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹
  isActivating: boolean;
  activationError: string | null;

  // Actions
  checkActivation: () => Promise<boolean>;
  activateDevice: (code: string) => Promise<ActivationResult>;
  clearActivation: () => void;
  startHeartbeat: () => void;
  stopHeartbeat: () => void;
}

export const useDeviceStore = create<DeviceState>()(
  persist(
    (set, get) => ({
      deviceId: null,
      deviceIdentifier: null,
      isActivated: false,
      salonId: null,
      salonName: null,
      deviceName: null,
      seatNumber: null,
      isActivating: false,
      activationError: null,

      checkActivation: async () => {
        const { deviceIdentifier } = get();
        if (!deviceIdentifier) return false;

        // heartbeat APIã§ãƒ‡ãƒã‚¤ã‚¹ãŒæœ‰åŠ¹ã‹ç¢ºèª
        const response = await supabase.functions.invoke('device-heartbeat', {
          body: { device_identifier: deviceIdentifier },
        });

        return response.data?.success === true;
      },

      activateDevice: async (code: string) => {
        set({ isActivating: true, activationError: null });

        try {
          const deviceIdentifier = await generateDeviceIdentifier();

          const response = await supabase.functions.invoke('activate-device', {
            body: {
              activation_code: code,
              device_identifier: deviceIdentifier,
            },
          });

          if (response.error) {
            throw new Error(response.error.message);
          }

          set({
            deviceId: response.data.device.id,
            deviceIdentifier,
            isActivated: true,
            salonId: response.data.salon.id,
            salonName: response.data.salon.name,
            deviceName: response.data.device.device_name,
            seatNumber: response.data.device.seat_number,
            isActivating: false,
          });

          // ãƒãƒ¼ãƒˆãƒ“ãƒ¼ãƒˆé–‹å§‹
          get().startHeartbeat();

          return { success: true, data: response.data };
        } catch (error) {
          set({
            isActivating: false,
            activationError: error.message,
          });
          return { success: false, error: error.message };
        }
      },

      clearActivation: () => {
        get().stopHeartbeat();
        set({
          deviceId: null,
          deviceIdentifier: null,
          isActivated: false,
          salonId: null,
          salonName: null,
          deviceName: null,
          seatNumber: null,
        });
      },

      startHeartbeat: () => {
        // 2åˆ†é–“éš”ã§ãƒãƒ¼ãƒˆãƒ“ãƒ¼ãƒˆé€ä¿¡
        const { deviceIdentifier } = get();
        if (!deviceIdentifier) return;

        const heartbeatInterval = setInterval(async () => {
          const response = await supabase.functions.invoke('device-heartbeat', {
            body: { device_identifier: deviceIdentifier },
          });

          // ãƒ‡ãƒã‚¤ã‚¹ãŒç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ãŸå ´åˆ
          if (response.data?.success === false) {
            get().clearActivation();
            // ã‚¢ãƒ—ãƒªã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ç”»é¢ã«æˆ»ã™
            router.replace('/activation');
          }
        }, 120000); // 2åˆ†

        // cleanupé–¢æ•°ã‚’ä¿å­˜
        set({ heartbeatIntervalId: heartbeatInterval });
      },

      stopHeartbeat: () => {
        const { heartbeatIntervalId } = get();
        if (heartbeatIntervalId) {
          clearInterval(heartbeatIntervalId);
        }
      },
    }),
    {
      name: 'device-storage',
      storage: createJSONStorage(() => AsyncStorage),
      partialize: (state) => ({
        deviceId: state.deviceId,
        deviceIdentifier: state.deviceIdentifier,
        isActivated: state.isActivated,
        salonId: state.salonId,
        salonName: state.salonName,
        deviceName: state.deviceName,
        seatNumber: state.seatNumber,
      }),
    }
  )
);
```

---

ï¼ˆç¶šãã¯ Part 6 ã«è¨˜è¼‰: å¤–éƒ¨é€£æºè©³ç´°è¨­è¨ˆã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°è©³ç´°ã€ãƒ†ã‚¹ãƒˆä»•æ§˜ï¼‰
# è©³ç´°è¨­è¨ˆæ›¸ Part 6: å¤–éƒ¨é€£æºè©³ç´°è¨­è¨ˆãƒ»ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°è©³ç´°ãƒ»ãƒ†ã‚¹ãƒˆä»•æ§˜ãƒ»ä»˜éŒ²

---
