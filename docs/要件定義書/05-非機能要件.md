## 5. 非機能要件

### 5.1 性能要件

#### NFR-P01: レスポンスタイム

| 操作 | 目標値 | 最大許容値 |
|------|--------|-----------|
| アプリ起動 | 3秒以内 | 5秒 |
| セッション開始 | 1秒以内 | 2秒 |
| リアルタイムスコア更新 | 500ms以内 | 1秒 |
| レポート生成 | 30秒以内 | 60秒 |
| 成功事例検索 | 2秒以内 | 5秒 |
| ダッシュボード表示 | 3秒以内 | 5秒 |

#### NFR-P02: スループット

| 項目 | 目標値 |
|------|--------|
| 同時セッション数（1店舗） | 20セッション |
| 同時セッション数（システム全体） | 1,000セッション |
| API リクエスト/秒 | 100 req/s |

#### NFR-P03: 処理能力

| 処理 | 目標値 |
|------|--------|
| 文字起こし | 1分音声 → 10秒以内（オンデバイス） |
| 話者分離 | 1時間音声 → 5分以内（サーバー） |
| AI分析 | 1セッション → 30秒以内 |

### 5.2 可用性要件

#### NFR-A01: 稼働率

| 項目 | 目標値 |
|------|--------|
| システム全体稼働率 | 99.5%以上 |
| 計画停止時間 | 月4時間以内 |
| 非計画停止時間 | 月1時間以内 |

#### NFR-A02: 障害復旧

| 項目 | 目標値 |
|------|--------|
| RTO（目標復旧時間） | 4時間以内 |
| RPO（目標復旧時点） | 1時間以内 |

#### NFR-A03: オフライン対応

| 機能 | オフライン対応 |
|------|--------------|
| 文字起こし | ○（オンデバイス処理） |
| 話者分離 | ×（サーバー必須） |
| AI分析 | ×（API必須） |
| レポート閲覧 | ○（キャッシュ） |

### 5.3 拡張性要件

#### NFR-S01: スケーラビリティ

| 項目 | 初期 | 1年後 | 3年後 |
|------|------|-------|-------|
| 導入店舗数 | 5店舗 | 50店舗 | 200店舗 |
| 月間セッション数 | 500 | 5,000 | 20,000 |
| データ保存量 | 10GB | 100GB | 500GB |

#### NFR-S02: 水平スケーリング

- Supabase: 自動スケーリング対応
- pyannoteサーバー: GPUインスタンス追加で対応
- ベクトルDB: シャーディング対応

### 5.4 保守性要件

#### NFR-M01: コード品質

| 項目 | 基準 |
|------|------|
| テストカバレッジ | 80%以上 |
| コード複雑度 | Cyclomatic Complexity ≤ 10 |
| ドキュメント | API仕様書、設計書完備 |

#### NFR-M02: ログ・監視

| 項目 | 要件 |
|------|------|
| アプリケーションログ | 全API呼び出し、エラー詳細 |
| 監視 | CPU、メモリ、ディスク、レスポンスタイム |
| アラート | エラー率1%超過、レスポンス5秒超過 |

### 5.5 移植性要件

#### NFR-T01: 対応プラットフォーム

| プラットフォーム | 対応バージョン |
|----------------|--------------|
| iOS/iPadOS | 26以上 |
| Webブラウザ | Chrome 120+, Safari 17+, Edge 120+ |

#### NFR-T02: デバイス要件

| デバイス | 最小要件 |
|---------|---------|
| iPad | iPad Pro 2020以降、iPad Air 4以降 |
| PC（管理画面） | 4GB RAM以上、1920x1080解像度 |

---
